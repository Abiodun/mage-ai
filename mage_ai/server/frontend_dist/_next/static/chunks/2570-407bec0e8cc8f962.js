"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2570],{65597:function(e,n,r){r.d(n,{f:function(){return l}});var t=r(46313),i=r(23831),o=r(49125),c=r(73942),l=t.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-0"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;"," "," "," ",""],58*o.iI,c.TR,2*o.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||i.Z.shadow).popup,";\n    background-color: ").concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.leftOffset&&"\n    left: ".concat(e.leftOffset,"px;\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}))},97496:function(e,n,r){var t=r(82394),i=r(12757),o=r(12691),c=r.n(o),l=r(34376),u=r.n(l),s=r(82684),d=r(83455),a=r(60328),p=r(47999),f=r(93461),h=r(67971),j=r(10919),x=r(47409),b=r(86673),g=r(54283),m=r(17903),Z=r(19711),v=r(41374),O=r(73942),y=r(10503),C=r(65597),k=r(49125),P=r(19395),w=r(96510),D=r(28598);function E(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?E(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function _(e){var n=e.onCancel,r=e.onSuccess,t=e.pipelineRun,o=t.status,c=(0,d.Db)(v.ZP.pipeline_runs.pipeline_schedules.useCreate(null===t||void 0===t?void 0:t.pipeline_schedule_id),{onSuccess:function(e){return(0,w.wD)(e,{callback:function(){r()},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.message;console.log(r,t)}})}}),l=(0,i.Z)(c,1)[0],u=(0,s.useState)(),f=u[0],j=u[1],m=(0,s.useCallback)((function(){j(!1),l({pipeline_run:{execution_date:null===t||void 0===t?void 0:t.execution_date,pipeline_schedule_id:null===t||void 0===t?void 0:t.pipeline_schedule_id,pipeline_uuid:null===t||void 0===t?void 0:t.pipeline_uuid,variables:null===t||void 0===t?void 0:t.variables}})}),[t]),P=(0,s.useCallback)((function(){j(!1),n(I(I({},t),{},{status:x.V.CANCELLED}))}),[t]);return(0,D.jsxs)("div",{style:{position:"relative"},children:[(0,D.jsx)(a.Z,{beforeIcon:x.V.INITIAL!==o&&(0,D.jsxs)(D.Fragment,{children:[x.V.COMPLETED===o&&(0,D.jsx)(y.Jr,{size:2*k.iI}),[x.V.FAILED,x.V.CANCELLED].includes(o)&&(0,D.jsx)(y.Py,{size:2*k.iI,inverted:x.V.CANCELLED===o}),[x.V.RUNNING].includes(o)&&(0,D.jsx)(g.Z,{color:"white",small:!0})]}),borderRadius:O.D7,danger:x.V.FAILED===o,default:x.V.INITIAL===o,notClickable:x.V.COMPLETED===o,onClick:function(){return j(x.V.COMPLETED!==o)},padding:"6px",primary:x.V.RUNNING===o,warning:x.V.CANCELLED===o,children:x.D[o]}),(0,D.jsx)(p.Z,{onClickOutside:function(){return j(!1)},open:f,children:(0,D.jsxs)(C.f,{children:[[x.V.RUNNING,x.V.INITIAL].includes(o)&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Z.ZP,{bold:!0,color:"#9ECBFF",children:"Run is in progress"}),(0,D.jsx)(b.Z,{mb:1}),(0,D.jsxs)(Z.ZP,{children:["This pipeline run is currently ongoing. Retrying will cancel",(0,D.jsx)("br",{}),"the current pipeline run."]}),(0,D.jsx)(Z.ZP,{}),(0,D.jsx)(b.Z,{mt:1,children:(0,D.jsxs)(h.Z,{children:[(0,D.jsx)(a.Z,{onClick:function(){P(),m()},children:"Retry run"}),(0,D.jsx)(b.Z,{ml:1}),(0,D.jsx)(a.Z,{onClick:P,children:"Cancel run"})]})})]}),[x.V.CANCELLED,x.V.FAILED].includes(o)&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(Z.ZP,{bold:!0,color:"#9ECBFF",children:["Run ",o]}),(0,D.jsx)(b.Z,{mb:1}),(0,D.jsx)(Z.ZP,{children:"Retry the run with changes you have made to the pipeline."}),(0,D.jsx)(b.Z,{mb:1}),(0,D.jsx)(a.Z,{onClick:m,children:"Retry run"})]})]})})]})}n.Z=function(e){var n=e.fetchPipelineRuns,r=e.height,t=e.onClickRow,o=e.pipelineRuns,l=e.selectedRun,s=(0,d.Db)((function(e){return v.ZP.pipeline_runs.useUpdate(e.id)({pipeline_run:e})}),{onSuccess:function(e){return(0,w.wD)(e,{callback:function(){n()},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.message;console.log(r,t)}})}}),p=(0,i.Z)(s,1)[0],g=[null,1,2,1,1,null],C=[{uuid:"Status"},{uuid:"Date"},{uuid:"Trigger"},{uuid:"Block runs"},{uuid:"Completed"},{uuid:"Logs"}];return t&&(g.push(null),C.push({label:function(){return""},uuid:"action"})),(0,D.jsx)("div",{style:{height:r,overflowY:"scroll"},children:(0,D.jsx)(m.Z,{columnFlex:g,columns:C,isSelectedRow:function(e){return o[e].id===(null===l||void 0===l?void 0:l.id)},onClickRow:t,rows:o.map((function(e,r){var i=e.block_runs_count,l=e.completed_at,s=e.execution_date,d=e.id,g=e.pipeline_schedule_id,m=e.pipeline_schedule_name,v=e.pipeline_uuid,C=e.status,w=[];return w=r>0&&o[r-1].execution_date==e.execution_date?[(0,D.jsx)(b.Z,{ml:1,children:(0,D.jsxs)(h.Z,{alignItems:"center",children:[(0,D.jsx)(y.TT,{size:2*k.iI,useStroke:!0}),(0,D.jsx)(a.Z,{borderRadius:O.D7,notClickable:!0,padding:"6px",children:(0,D.jsx)(Z.ZP,{muted:!0,children:x.D[C]})})]})}),(0,D.jsx)(Z.ZP,{default:!0,monospace:!0,muted:!0,children:"-"}),(0,D.jsx)(Z.ZP,{default:!0,monospace:!0,muted:!0,children:"-"}),(0,D.jsx)(c(),{as:"/pipelines/".concat(v,"/runs/").concat(d),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,D.jsx)(j.Z,{bold:!0,muted:!0,children:"See block runs (".concat(i,")")})}),(0,D.jsx)(Z.ZP,{monospace:!0,muted:!0,children:l&&(0,P.e)(l).toISOString().split(".")[0]||"-"}),(0,D.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return u().push("/pipelines/".concat(v,"/logs?pipeline_run_id[]=").concat(d))},children:(0,D.jsx)(y.B4,{default:!0,size:2*k.iI})})]:[(0,D.jsx)(_,{onCancel:p,onSuccess:n,pipelineRun:e}),(0,D.jsx)(Z.ZP,{monospace:!0,default:!0,children:s}),(0,D.jsx)(c(),{as:"/pipelines/".concat(v,"/triggers/").concat(g),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,D.jsx)(j.Z,{bold:!0,sameColorAsText:!0,children:m})}),(0,D.jsx)(c(),{as:"/pipelines/".concat(v,"/runs/").concat(d),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,D.jsx)(j.Z,{bold:!0,sameColorAsText:!0,children:"See block runs (".concat(i,")")})}),(0,D.jsx)(Z.ZP,{default:!0,monospace:!0,children:l&&(0,P.e)(l).toISOString().split(".")[0]||"-"}),(0,D.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return u().push("/pipelines/".concat(v,"/logs?pipeline_run_id[]=").concat(d))},children:(0,D.jsx)(y.B4,{default:!0,size:2*k.iI})})],t&&w.push((0,D.jsx)(f.Z,{flex:1,justifyContent:"flex-end",children:(0,D.jsx)(y._Q,{default:!0,size:2*k.iI})})),w})),uuid:"pipeline-runs"})})}},56681:function(e,n,r){r.d(n,{G:function(){return Z},Z:function(){return v}});var t=r(12757),i=r(82394),o=r(26304),c=r(1583),l=r(22673),u=r(86532),s=r(86673),d=r(19711),a=r(17903),p=r(49125),f=r(19395),h=r(28598),j=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function x(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?x(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var g={uuid:"Run details"},m={uuid:"Dependency tree"},Z=[m,g];function v(e){var n=e.height,r=e.heightOffset,i=e.pipeline,x=e.selectedRun,v=e.selectedTab,O=e.setSelectedTab,y=b({},(0,o.Z)(e,j));x?y.blockStatus=(0,f.I)(null===x||void 0===x?void 0:x.block_runs):y.noStatus=!0;var C=null===x||void 0===x?void 0:x.variables,k=[];C&&JSON.stringify(C,null,2).split("\n").forEach((function(e){k.push("    ".concat(e))}));var P=x&&[["Run ID",null===x||void 0===x?void 0:x.id],["Variables",(0,h.jsx)(l.Z,{language:"json",small:!0,source:k.join("\n")})]],w=x&&(0,h.jsx)(s.Z,{pb:p.cd,px:p.cd,children:(0,h.jsx)(a.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:P.map((function(e){var n=(0,t.Z)(e,2),r=n[0],i=n[1];return[(0,h.jsx)(d.ZP,{monospace:!0,muted:!0,children:r}),(0,h.jsx)(d.ZP,{monospace:!0,textOverflow:!0,children:i})]})),uuid:"LogDetail"})}),D=v&&O;return(0,h.jsxs)(h.Fragment,{children:[D&&(0,h.jsx)(s.Z,{py:p.cd,children:(0,h.jsx)(c.Z,{onClickTab:O,selectedTabUUID:null===v||void 0===v?void 0:v.uuid,tabs:Z})}),(!D||m.uuid===(null===v||void 0===v?void 0:v.uuid))&&(0,h.jsx)(u.Z,b(b({},y),{},{height:n,heightOffset:(r||0)+(D?76:0),pipeline:i})),g.uuid===(null===v||void 0===v?void 0:v.uuid)&&w]})}},19395:function(e,n,r){r.d(n,{I:function(){return u},e:function(){return s}});var t=r(82394),i=r(92083),o=r.n(i);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function u(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var r=n.block_uuid,i=n.completed_at,c=n.started_at,u=n.status,s=null;c&&i&&(s=o()(i).valueOf()-o()(c).valueOf());return l(l({},e),{},(0,t.Z)({},r,{runtime:s,status:u}))}),{})}function s(e){if(!e)return null;var n=new Date(o()(e).valueOf()),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(r)}},51099:function(e,n,r){r(82684);var t=r(60328),i=r(67971),o=r(86673),c=r(10503),l=r(73899),u=r(49125),s=r(28598);n.Z=function(e){var n=e.page,r=e.maxPages,d=e.onUpdate,a=e.totalPages,p=[],f=r;if(f>a)p=Array.from({length:a},(function(e,n){return n}));else{var h=Math.floor(f/2),j=n-h;n+h>=a?(j=a-f+2,f-=2):n-h<=0?(j=0,f-=2):(f-=4,j=n-Math.floor(f/2)),p=Array.from({length:f},(function(e,n){return n+j}))}return(0,s.jsx)(s.Fragment,{children:a>0&&(0,s.jsxs)(i.Z,{alignItems:"center",children:[(0,s.jsx)(t.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(c.Hd,{size:1.5*u.iI,stroke:"#AEAEAE"})}),!p.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(t.Z,{onClick:function(){return d(0)},borderLess:!0,noBackground:!0,children:1})},0),!p.includes(1)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(t.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),p.map((function(e){return(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(t.Z,{onClick:function(){e!==n&&d(e)},notClickable:e===n,backgroundColor:e===n&&l.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!p.includes(a-1)&&(0,s.jsxs)(s.Fragment,{children:[!p.includes(a-2)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(t.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(t.Z,{onClick:function(){return d(a-1)},borderLess:!0,noBackground:!0,children:a})},a-1)]}),(0,s.jsx)(o.Z,{ml:1}),(0,s.jsx)(t.Z,{disabled:n===a-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(c.Kw,{size:1.5*u.iI,stroke:"#AEAEAE"})})]})})}},47409:function(e,n,r){r.d(n,{D:function(){return c},V:function(){return o}});var t,i=r(82394),o=r(66050).V,c=(t={},(0,i.Z)(t,o.COMPLETED,"Done"),(0,i.Z)(t,o.CANCELLED,"Cancelled"),(0,i.Z)(t,o.FAILED,"Failed"),(0,i.Z)(t,o.RUNNING,"Running"),(0,i.Z)(t,o.INITIAL,"Ready"),t)},22673:function(e,n,r){var t=r(82684),i=r(73199),o=r.n(i),c=r(71735),l=r(46313),u=r(65292),s=r(23831),d=r(2005),a=r(49125),p=r(28598);n.Z=function(e){var n=e.language,r=e.maxWidth,i=e.showLineNumbers,f=e.small,h=e.source,j=e.wrapLines,x=(0,t.useContext)(l.ThemeContext);return(0,p.jsx)(o(),{source:h,renderers:{code:function(e){var t=e.value;return(0,p.jsx)(c.Z,{customStyle:{backgroundColor:(x.background||s.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:d.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,paddingBottom:2*a.iI,paddingTop:2*a.iI,maxWidth:r},lineNumberStyle:{color:(x.content||s.Z.content).muted},language:n,showLineNumbers:i,style:u._4,useInlineStyles:!0,wrapLines:j,children:t})}}})}}}]);