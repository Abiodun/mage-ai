(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{1210:function(e,n,r){"use strict";r.d(n,{Z:function(){return y}});var t=r(82394),o=r(21831),i=r(82684),l=r(47999),c=r(49894),s=r(93461),d=r(57384),u=r(41424),a=r(72454),f=r(28598);function h(e,n){var r=e.children;return(0,f.jsx)(a.HS,{ref:n,children:r})}var m=i.forwardRef(h),v=r(32063),j=r(85019),x=r(82531),b=r(66166),g=r(3055),Z=r(49125),p=r(91427),w=r(24141);function k(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function C(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var y=function(e){var n,r=e.after,t=e.afterHidden,h=e.afterWidth,k=e.afterWidthOverride,y=e.before,P=e.beforeWidth,_=e.breadcrumbs,I=e.children,S=e.errors,O=e.headerMenuItems,B=e.headerOffset,M=e.mainContainerHeader,D=e.navigationItems,F=e.setErrors,H=e.subheaderChildren,E=e.title,N=e.uuid,A=(0,w.i)().width,U="dashboard_after_width_".concat(N),T="dashboard_before_width_".concat(N),G=(0,i.useRef)(null),R=(0,i.useState)(k?h:(0,p.U2)(U,h)),V=R[0],L=R[1],z=(0,i.useState)(!1),W=z[0],q=z[1],Q=(0,i.useState)(y?Math.max((0,p.U2)(T,P),13*Z.iI):null),K=Q[0],X=Q[1],Y=(0,i.useState)(!1),J=Y[0],$=Y[1],ee=(0,i.useState)(null)[1],ne=x.ZP.projects.list({},{revalidateOnFocus:!1}).data,re=null===ne||void 0===ne?void 0:ne.projects,te=[];_?te.push.apply(te,(0,o.Z)(_)):(null===re||void 0===re?void 0:re.length)>=1&&te.push.apply(te,[{label:function(){var e;return null===(e=re[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return E}}]),(0,i.useEffect)((function(){null===G||void 0===G||!G.current||W||J||null===ee||void 0===ee||ee(G.current.getBoundingClientRect().width)}),[W,V,J,K,G,ee,A]),(0,i.useEffect)((function(){W||(0,p.t8)(U,V)}),[t,W,V,U]),(0,i.useEffect)((function(){J||(0,p.t8)(T,K)}),[J,K,T]);var oe=(0,b.Z)(h);return(0,i.useEffect)((function(){k&&oe!==h&&L(h)}),[k,h,oe]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.Z,{title:E}),(0,f.jsx)(u.Z,{breadcrumbs:te,menuItems:O,project:null===re||void 0===re?void 0:re[0],version:null===re||void 0===re||null===(n=re[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(a.Nk,{children:[0!==(null===D||void 0===D?void 0:D.length)&&(0,f.jsx)(a.lm,{showMore:!0,children:(0,f.jsx)(j.Z,{navigationItems:D,showMore:!0})}),(0,f.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(v.Z,{after:r,afterHeightOffset:g.Mz,afterHidden:t,afterMousedownActive:W,afterWidth:V,before:y,beforeHeightOffset:g.Mz,beforeMousedownActive:J,beforeWidth:a.k1+(y?K:0),headerOffset:B,hideAfterCompletely:!0,leftOffset:y?a.k1:null,mainContainerHeader:M,mainContainerRef:G,setAfterMousedownActive:q,setAfterWidth:L,setBeforeMousedownActive:$,setBeforeWidth:X,children:[H&&(0,f.jsx)(m,{children:H}),I]})})]}),S&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===F||void 0===F?void 0:F(null)},children:(0,f.jsx)(c.Z,C(C({},S),{},{onClose:function(){return null===F||void 0===F?void 0:F(null)}}))})]})}},32316:function(e,n,r){"use strict";r.d(n,{Z:function(){return j}});var t=r(82684),o=r(60328),i=r(67971),l=r(882),c=r(86673),s=r(19711),d=r(99994),u=r(38626),a=r(49125),f=r(37391),h=u.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],a.cd*a.iI,a.cd*a.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),f.w5),m=r(66653),v=r(28598);var j=function(e){var n=e.allowScroll,r=e.compact,u=e.contained,f=e.noPadding,j=e.onClickTab,x=e.selectedTabUUID,b=e.small,g=e.tabs,Z=(0,t.useMemo)((function(){var e=g.length,n=[];return g.forEach((function(t,u){var f=t.Icon,h=t.IconSelected,g=t.label,Z=t.uuid,p=Z===x,w=p&&h||f,k=g?g():Z,C=(0,v.jsxs)(i.Z,{alignItems:"center",children:[w&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w,{default:!p,size:2*a.iI}),(0,v.jsx)(c.Z,{mr:1})]}),(0,v.jsx)(s.ZP,{bold:!0,default:!p,noWrapping:!0,small:!0,children:k})]});u>=1&&e>=2&&n.push((0,v.jsx)("div",{style:{marginLeft:1.5*a.iI}},"spacing-".concat(Z))),p?n.push((0,v.jsx)(l.Z,{backgroundGradient:d.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:r||b,onClick:function(e){(0,m.j)(e),j(t)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:b,children:C},Z)):n.push((0,v.jsx)("div",{style:{padding:2},children:(0,v.jsx)(o.Z,{borderLess:!0,compact:r||b,default:!0,onClick:function(e){(0,m.j)(e),j(t)},outline:!0,small:b,children:C})},"button-tab-".concat(Z)))})),n}),[r,j,x,b,g]),p=(0,v.jsx)(i.Z,{alignItems:"center",children:Z});return u?p:(0,v.jsx)(h,{allowScroll:n,noPadding:f,children:p})}},83243:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return ge}});var t=r(77837),o=r(38860),i=r.n(o),l=r(41788),c=r(82394),s=r(75582),d=r(54407),u=r.n(d),a=r(82684),f=r(83455),h=r(60328),m=r(34744),v=r(67971),j=r(87372),x=r(55378),b=r(86673),g=r(54283),Z=r(19711),p=r(38435),w=r(82944),k=r(46261),C=r(82531),y=r(10503),P="delete",_="merge",I="pull",S="push",O="rebase",B={uuid:"Branches"},M={uuid:"Files"},D={uuid:"Commit"},F={uuid:"Setup"},H=[F,B,M,D],E=r(49125),N=r(90211),A=r(96510),U=r(28598);var T=function(e){var n=e.branch,r=e.branches,t=e.fetchBranch,o=e.fetchBranches,i=e.showError,l=(0,a.useState)(""),d=l[0],u=l[1],I=(0,a.useState)(null),S=I[0],B=I[1],D=(0,a.useState)(null),H=D[0],T=D[1],G=(0,a.useState)(null),R=G[0],V=G[1],L=(0,a.useState)(""),z=L[0],W=L[1],q=(0,f.Db)(C.ZP.git_branches.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){t(),o(),W("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),Q=(0,s.Z)(q,2),K=Q[0],X=Q[1].isLoading,Y=(0,f.Db)(C.ZP.git_branches.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){t()},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),J=(0,s.Z)(Y,2),$=J[0],ee=J[1].isLoading,ne=(0,f.Db)(C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch.progress;t(),u(""),B(""),T(n),V("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),re=(0,s.Z)(ne,2),te=re[0],oe=re[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsxs)(j.Z,{children:["Branches",r?" (".concat(null===r||void 0===r?void 0:r.length,")"):""]}),(0,U.jsxs)(b.Z,{mt:E.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(k.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{muted:!1}),beforeIconSize:2*E.iI,monospace:!0,onChange:function(e){return $({git_branch:{name:e.target.value}})},value:null===n||void 0===n?void 0:n.name,children:(null===n||void 0===n?void 0:n.name)&&(null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)})))})}),(0,U.jsx)(b.Z,{mr:E.cd}),ee&&(0,U.jsx)(g.Z,{inverted:!0})]})]}),(0,U.jsx)(b.Z,{mt:E.Mq,children:(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(w.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return W(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:z||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.mm,{size:2*E.iI}),disabled:!z,loading:X,onClick:function(){K({git_branch:{name:z}})},primary:!0,children:"Create new branch"})]})})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(j.Z,{children:"Actions"}),(0,U.jsxs)(b.Z,{mt:E.Mq,children:[(0,U.jsxs)(b.Z,{mb:E.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===n||void 0===n?void 0:n.name)&&(0,U.jsx)(Z.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.name})]}),(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return V(e.target.value)},placeholder:"Choose a branch",value:R,children:null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,U.jsxs)(x.Z,{onChange:function(e){return B(e.target.value)},placeholder:"Choose action",value:S||"",children:[(0,U.jsx)("option",{value:_,children:(0,N.vg)(_)}),(0,U.jsx)("option",{value:O,children:(0,N.vg)(O)}),(0,U.jsx)("option",{value:P,children:(0,N.vg)(P)})]})]})]}),S&&[_,O].includes(S)&&(0,U.jsxs)(b.Z,{mt:E.cd,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsxs)(Z.ZP,{bold:!0,muted:!0,children:["Message for ",S]})}),(0,U.jsx)(p.Z,{monospace:!0,onChange:function(e){return u(e.target.value)},value:d||""})]}),(0,U.jsxs)(b.Z,{mt:E.cd,children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*E.iI}),disabled:!S||!R,loading:oe,onClick:function(){(P!==S||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(R,"?")))&&te({git_branch:(0,c.Z)({action_type:S,message:d},S,{base_branch:R})})},primary:!0,children:S?(0,N.vg)(S):"Execute action"}),H&&(0,U.jsx)(b.Z,{mt:E.cd,children:(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,preWrap:!0,children:H})})]})]})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.Hd,{}),linkProps:{href:"/version-control?tab=".concat(F.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:F.uuid}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(h.Z,{afterIcon:(0,U.jsx)(y.Kw,{}),linkProps:{href:"/version-control?tab=".concat(M.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",M.uuid]})]})]})]})},G=r(32316),R=r(12691),V=r.n(R),L=r(44182),z=r(25880),W=r(10919),q=r(87815);var Q=function(e){var n=e.branch,r=e.branches,t=e.fetchBranch,o=e.modifiedFiles,i=e.remotes,l=e.setSelectedFilePath,d=e.showError,u=e.stagedFiles,w=(0,a.useState)((null===n||void 0===n?void 0:n.name)||""),k=w[0],P=w[1],_=(0,a.useState)(null),I=_[0],O=_[1],B=(0,a.useState)(null),D=B[0],F=B[1],H=(0,a.useState)(""),T=H[0],G=H[1],R=(0,a.useState)(""),Q=R[0],K=R[1],X=C.ZP.git_branches.detail("with_logs",{_format:"with_logs"}),Y=X.data,J=X.mutate,$=(0,a.useMemo)((function(){var e;return(null===Y||void 0===Y||null===(e=Y.git_branch)||void 0===e?void 0:e.logs)||[]}),[Y]),ee=(0,a.useMemo)((function(){return(0,U.jsx)(q.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:$.map((function(e){var n=e.author,r=e.date,t=e.message;return[(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:r},"date"),(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:t},"message")]})),uuid:"git-branch-logs"})}),[$]),ne=(0,a.useMemo)((function(){return Object.keys(u||{})}),[u]),re=(0,a.useMemo)((function(){return ne.length}),[ne]),te=(0,f.Db)(C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){J(),t(),K("")},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),oe=(0,s.Z)(te,2),ie=oe[0],le=oe[1].isLoading,ce=(0,f.Db)(C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch,r=n.error,t=n.progress;r?(O(r),F(null)):(J(),P(null),O(null),G(null),F(t))},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),se=(0,s.Z)(ce,2),de=se[0],ue=se[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:E.cd,children:(0,U.jsx)(L.Z,{children:(0,U.jsx)(z.Z,{noPaddingContent:!0,title:re>=1?"Staged files (".concat(re,")"):"No staged files",children:null===ne||void 0===ne?void 0:ne.map((function(e){return(0,U.jsx)(b.Z,{my:1,px:E.cd,children:(0,U.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,U.jsx)(W.Z,{default:!0,monospace:!0,onClick:function(){return l((function(n){return n===e?null:e}))},warning:null===o||void 0===o?void 0:o[e],children:e}),(0,U.jsx)(b.Z,{mr:1}),(null===o||void 0===o?void 0:o[e])&&(0,U.jsxs)(Z.ZP,{warning:!0,children:["Modified after ",(0,U.jsx)(V(),{href:"/version-control?tab=".concat(M.uuid),passHref:!0,children:(0,U.jsx)(W.Z,{underline:!0,warning:!0,children:"staging"})})]})]})},e)}))})})}),(0,U.jsx)(p.Z,{disabled:0===re,label:"Commit message",monospace:!0,onChange:function(e){return K(e.target.value)},value:Q||""}),(0,U.jsx)(b.Z,{mt:E.cd,children:(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsxs)(h.Z,{disabled:0===re||!((null===Q||void 0===Q?void 0:Q.length)>=1),loading:le,onClick:function(){ie({git_branch:{action_type:"commit",files:ne,message:Q}})},primary:!0,children:["Commit ",(0,N._6)("file",re,!0)," with message"]}),0===re&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(Z.ZP,{danger:!0,small:!0,children:["Please ",(0,U.jsx)(V(),{href:"/version-control?tab=".concat(M.uuid),passHref:!0,children:(0,U.jsx)(W.Z,{danger:!0,small:!0,underline:!0,children:"stage"})})," at least 1 file before committing."]})]})]})})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:(0,N.vg)(S)})}),(0,U.jsxs)(b.Z,{mt:E.Mq,children:[(0,U.jsxs)(v.Z,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.VW,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return G(e.target.value)},placeholder:"Choose remote",value:T||"",children:null===i||void 0===i?void 0:i.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,U.jsxs)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return P(e.target.value)},placeholder:"Choose branch",value:k||"",children:[(0,U.jsx)("option",{value:""}),null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,U.jsx)(b.Z,{mt:E.cd,children:(0,U.jsxs)(h.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*E.iI}),disabled:!T||!k,loading:ue,onClick:function(){F(null),de({git_branch:(0,c.Z)({action_type:S},S,{branch:k,remote:T})})},primary:!0,children:[(0,N.vg)(S)," ",T," ",T&&k]})}),(D||I)&&(0,U.jsx)(b.Z,{mt:E.cd,children:(0,U.jsx)(Z.ZP,{danger:!!I,default:!!D,monospace:!0,preWrap:!0,children:D||I})})]})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:"Logs"})}),(0,U.jsxs)(b.Z,{mt:E.Mq,children:[!Y&&(0,U.jsx)(g.Z,{inverted:!0}),Y&&ee]})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.Z,{children:(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.Hd,{}),linkProps:{href:"/version-control?tab=".concat(M.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:M.uuid})})]})]})},K=r(1210),X=r(46299),Y=r(34376),J=r(38341),$=r(93461),ee=r(38626),ne=ee.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*E.iI),re=r(7715);function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ie,le=function(e){var n=e.branch,r=e.fetchBranch,t=e.modifiedFiles,o=e.showError,i=e.stagedFiles,l=e.untrackedFiles,c=(0,Y.useRouter)(),d=(0,a.useState)({}),u=d[0],x=d[1],g=(0,a.useState)({}),p=g[0],w=g[1],k=(0,a.useMemo)((function(){return Object.keys(t).concat(Object.keys(l)).sort()}),[t,l]),P=(0,a.useMemo)((function(){return Object.keys(i)}),[i]),_=(0,a.useMemo)((function(){return Object.keys(u).length===(null===k||void 0===k?void 0:k.length)}),[u,k]),I=(0,a.useMemo)((function(){return Object.keys(p).length===(null===P||void 0===P?void 0:P.length)}),[p,P]),S=(0,a.useMemo)((function(){return{onErrorCallback:function(e,n){return o({errors:n,response:e})}}}),[o]),O=(0,a.useMemo)((function(){return{onSuccess:function(e){return(0,A.wD)(e,oe({callback:function(){r(),x({})}},S))}}}),[r,S]),M=(0,a.useMemo)((function(){return C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),F=(0,f.Db)(M,O),H=(0,s.Z)(F,2),N=H[0],T=H[1].isLoading,G=(0,f.Db)(M,O),R=(0,s.Z)(G,2),V=R[0],L=R[1].isLoading,z=(0,f.Db)(M,{onSuccess:function(e){return(0,A.wD)(e,oe({callback:function(){r(),w({})}},S))}}),q=(0,s.Z)(z,2),Q=q[0],K=q[1].isLoading,X=(0,a.useCallback)((function(e,n,r,t,o){var i=(null===e||void 0===e?void 0:e.length)>=1;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(W.Z,{block:!0,noHoverUnderline:!0,onClick:function(){r(o?{}:t)},preventDefault:!0,children:(0,U.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(J.Z,{checked:i&&o,disabled:!i}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(Z.ZP,{bold:!0,children:i&&o?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,U.jsx)(ne,{children:(0,U.jsx)(W.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return r((function(n){var r=oe({},n);return!(null!==r&&void 0!==r&&r[e])?r[e]=!0:delete r[e],r}))},preventDefault:!0,children:(0,U.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(J.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),ee=(0,a.useMemo)((function(){return(0,re.Qr)(u)}),[u]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mb:E.HN,children:(0,U.jsxs)(v.Z,{children:[(0,U.jsxs)($.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(j.Z,{children:["Not staged ",(null===k||void 0===k?void 0:k.length)>=1&&"(".concat(null===k||void 0===k?void 0:k.length,")")]}),(0,U.jsx)(b.Z,{my:E.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(b.Z,{mb:E.cd,children:(0,U.jsxs)(v.Z,{flexDirection:"row",children:[(0,U.jsx)(h.Z,{compact:!0,disabled:ee||K||L,loading:T,onClick:function(){N({git_branch:{action_type:"add",files:Object.keys(u)}})},primary:!0,children:"Add files"}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(h.Z,{compact:!0,disabled:ee||T||K,loading:L,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&V({git_branch:{action_type:"checkout",files:Object.keys(u)}})},children:"Checkout files"})]})}),X(k,u,x,oe(oe({},t),l),_)]}),(0,U.jsx)(b.Z,{mr:E.cd}),(0,U.jsxs)($.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(j.Z,{children:["Staged files ",(null===P||void 0===P?void 0:P.length)>=1&&"(".concat(null===P||void 0===P?void 0:P.length,")")]}),(0,U.jsx)(b.Z,{my:E.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(b.Z,{mb:E.cd,children:(0,U.jsx)(v.Z,{flexDirection:"row",children:(0,U.jsx)(h.Z,{compact:!0,disabled:(0,re.Qr)(p)||T||L,loading:K,onClick:function(){Q({git_branch:{action_type:"reset",files:Object.keys(p)}})},secondary:!0,children:"Reset files"})})}),X(P,p,w,i,I)]})]})}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.Hd,{}),linkProps:{href:"/version-control?tab=".concat(B.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:B.uuid}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(h.Z,{afterIcon:(0,U.jsx)(y.Kw,{}),linkProps:ee?{href:"/version-control?tab=".concat(D.uuid)}:null,noHoverUnderline:!0,onClick:ee?null:function(){N({git_branch:{action_type:"add",files:Object.keys(u)}}).then((function(){c.push("/version-control?tab=".concat(D.uuid))}))},primary:ee,sameColorAsText:!0,secondary:!ee,children:ee?"Next: ".concat(D.uuid):"Add files and go to ".concat(D.uuid)})]})]})]})};!function(e){e.GITHUB="github"}(ie||(ie={}));var ce=r(59e3);var se=function(e){var n=e.branch,r=e.fetchBranch,t=e.loading,o=e.remotes,i=e.showError,l=(0,Y.useRouter)(),c=(0,a.useRef)(null),d=(0,a.useState)(null),u=d[0],p=d[1],k=(0,a.useState)(null),P=k[0],_=k[1],S=(0,a.useState)(null),O=S[0],M=S[1],D=(0,a.useState)(null),F=D[0],H=D[1],T=(0,a.useState)(null),G=T[0],R=T[1],Q=(0,a.useState)(!1),K=Q[0],X=Q[1],J=(0,a.useState)(null),ee=J[0],ne=J[1],re=(0,a.useState)(""),te=re[0],oe=re[1],le=(0,a.useState)(""),se=le[0],de=le[1],ue=(0,a.useState)(null),ae=ue[0],fe=ue[1];(0,a.useEffect)((function(){var e,r;null!==n&&void 0!==n&&null!==(e=n.sync_config)&&void 0!==e&&e.repo_path&&null===ae&&fe(null===n||void 0===n||null===(r=n.sync_config)||void 0===r?void 0:r.repo_path)}),[n,ae]);var he=(0,a.useMemo)((function(){var e,n;return null===o||void 0===o||null===(e=o.find((function(e){return e.name===G})))||void 0===e||null===(n=e.refs)||void 0===n?void 0:n.map((function(e){return{name:e.name.split("".concat(G,"/"))[1]}}))}),[G,o]),me=(0,f.Db)(C.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),X(!1)},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ve=(0,s.Z)(me,2),je=ve[0],xe=ve[1].isLoading,be=(0,f.Db)(C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch,t=n.error,o=n.progress;t?(_(t),H(null)):(r(),p(null),_(null),M(null),H(o),R(null))},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ge=(0,s.Z)(be,2),Ze=ge[0],pe=ge[1].isLoading,we=(0,f.Db)(C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),oe(""),de("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ke=(0,s.Z)(we,2),Ce=ke[0],ye=ke[1].isLoading,Pe=(0,f.Db)(C.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),ne(null)},onErrorCallback:function(e,n){ne(null),i({errors:n,response:e})}})}}),_e=(0,s.Z)(Pe,2),Ie=_e[0],Se=_e[1].isLoading,Oe=C.ZP.oauths.detail(ie.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)}),Be=Oe.data,Me=Oe.mutate,De=(0,a.useMemo)((function(){return(null===Be||void 0===Be?void 0:Be.oauth)||{}}),[Be]),Fe=(0,f.Db)(C.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){Me()},onErrorCallback:function(e,n){i({errors:n,response:e})}})}}),He=(0,s.Z)(Fe,2),Ee=He[0],Ne=He[1].isLoading,Ae=((0,ce.iV)()||{}).access_token;(0,a.useEffect)((function(){!De||null!==De&&void 0!==De&&De.authenticated||!Ae||Ee({oauth:{provider:ie.GITHUB,token:Ae}})}),[Ae,Ee,De]);var Ue=(0,a.useMemo)((function(){return null===o||void 0===o?void 0:o.map((function(e){var n=e.name,r=e.refs,t=e.urls;return(0,U.jsxs)(b.Z,{mt:E.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsxs)(v.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,U.jsxs)($.Z,{alignItems:"center",children:[(0,U.jsx)(Z.ZP,{bold:!0,children:n}),(0,U.jsx)(b.Z,{mx:1,children:(0,U.jsx)(y._Q,{muted:!0})}),null===t||void 0===t?void 0:t.map((function(e){return(0,U.jsx)(b.Z,{mr:1,children:(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(h.Z,{compact:!0,disabled:Se&&ee!==n,iconOnly:!0,loading:Se&&ee===n,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(n,"?"))&&(ne(n),Ie({git_branch:{action_type:"remove_remote",remote:{name:n}}}))},small:!0,title:"Remote remote ".concat(n),children:(0,U.jsx)(y.rF,{})})]})}),(0,U.jsx)(L.Z,{children:(0,U.jsxs)(z.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===r||void 0===r?void 0:r.length,")"),children:[0===(null===r||void 0===r?void 0:r.length)&&(0,U.jsx)(b.Z,{p:E.cd,children:(0,U.jsx)(Z.ZP,{muted:!0,children:"This remote has no refs."})}),(null===r||void 0===r?void 0:r.length)>=1&&(0,U.jsx)(q.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:r.map((function(e){var n,r=e.commit,t=e.name;return[(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:t},"ref-name"),(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.name},"author"),(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.date},"date"),(0,U.jsx)(Z.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,U.jsx)(b.Z,{mt:E.Mq,children:(0,U.jsx)(m.Z,{light:!0})})]},n)}))}),[Se,ee,o,Ie]);return(0,U.jsxs)(U.Fragment,{children:[Be&&(0,U.jsxs)(b.Z,{mb:E.HN,children:[(null===De||void 0===De?void 0:De.authenticated)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.fy,{size:2*E.iI}),disabled:!0,children:"Successfully authenticated with GitHub"}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(Z.ZP,{muted:!0,children:"You can pull, push, and create pull requests on GitHub."})})]}),!(null!==De&&void 0!==De&&De.authenticated)&&(null===De||void 0===De?void 0:De.url)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.fy,{size:2*E.iI}),loading:Ne,onClick:function(){return l.push(null===De||void 0===De?void 0:De.url)},primary:!0,children:"Authenticate with GitHub"}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(Z.ZP,{muted:!0,children:"Authenticating with GitHub will allow you to pull, push, and create pull requests on GitHub."})})]})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(j.Z,{children:"Setup"}),(0,U.jsxs)(b.Z,{mt:E.Mq,children:[(0,U.jsxs)(b.Z,{mb:1,children:[(0,U.jsx)(Z.ZP,{bold:!0,large:!0,children:"Git init directory"}),(0,U.jsxs)(Z.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,U.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(w.Z,{disabled:!K,label:"Git directory",monospace:!0,onChange:function(e){return fe(e.target.value)},ref:c,value:ae||""}),(0,U.jsx)(b.Z,{mr:1}),K&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{compact:!0,loading:xe,onClick:function(){je({sync:{repo_path:ae}})},primary:!0,small:!0,children:"Save"}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(W.Z,{onClick:function(){return X(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]}),!K&&(0,U.jsx)(W.Z,{onClick:function(){X(!0),setTimeout((function(){var e;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsxs)(j.Z,{children:["Remotes",!t&&o?" (".concat(null===o||void 0===o?void 0:o.length,")"):""]}),t&&(0,U.jsx)(b.Z,{mt:E.Mq,children:(0,U.jsx)(g.Z,{inverted:!0})}),!t&&Ue,(0,U.jsx)(b.Z,{mt:E.Mq,children:(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(w.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return oe(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:te||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(w.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return de(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:se||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.mm,{size:2*E.iI}),disabled:!te||!se,loading:ye,onClick:function(){Ce({git_branch:{action_type:"add_remote",remote:{name:te,url:se}}})},primary:!0,children:"Create new remote"})]})})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(j.Z,{children:"Actions"}),(0,U.jsxs)(b.Z,{mt:E.Mq,children:[(0,U.jsxs)(b.Z,{mb:E.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(Z.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===n||void 0===n?void 0:n.name)&&(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(Z.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.name}),(0,U.jsx)(b.Z,{mr:E.cd}),(0,U.jsx)(V(),{href:"/version-control?tab=".concat(B.uuid),passHref:!0,children:(0,U.jsx)(W.Z,{small:!0,children:"Switch branch"})})]})]}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(x.Z,{onChange:function(e){return M(e.target.value)},placeholder:"Action",value:O||"",children:(0,U.jsx)("option",{value:I,children:(0,N.vg)(I)})}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.VW,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return R(e.target.value)},placeholder:"Remote",value:G||"",children:null===o||void 0===o?void 0:o.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return p(e.target.value)},value:u||"",children:[(0,U.jsx)("option",{value:"",children:"All branches"}),null===he||void 0===he?void 0:he.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]}),(0,U.jsxs)(b.Z,{mt:E.cd,children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*E.iI}),disabled:!O||!G,loading:pe,onClick:function(){H(null),Ze({git_branch:{action_type:O,pull:{branch:u,remote:G}}})},primary:!0,children:O?(0,N.vg)(O):"Execute action"}),(F||P)&&(0,U.jsx)(b.Z,{mt:E.cd,children:(0,U.jsx)(Z.ZP,{danger:!!P,default:!!F,monospace:!0,preWrap:!0,children:F||P})})]})]})]}),(0,U.jsxs)(b.Z,{mb:E.HN,children:[(0,U.jsx)(b.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.Z,{children:(0,U.jsxs)(h.Z,{afterIcon:(0,U.jsx)(y.Kw,{}),linkProps:{href:"/version-control?tab=".concat(B.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",B.uuid]})})]})]})},de=r(2005),ue=ee.default.div.withConfig({displayName:"indexstyle__DiffContainerStyle",componentId:"sc-1fo4nus-0"})(["pre{font-family:",";}"],de.Vp),ae={codeFoldGutter:{},content:{},contentText:{},diffAdded:{},diffContainer:{},diffRemoved:{},emptyGutter:{},emptyLine:{},gutter:{},highlightedGutter:{},highlightedLine:{},line:{},lineNumber:{},marker:{},splitView:{},titleBlock:{},variables:{dark:{addedBackground:"#044B53",addedColor:"white",addedGutterBackground:"#034148",addedGutterColor:"#8c8c8c",codeFoldBackground:"#262831",codeFoldContentColor:"#555a7b",codeFoldGutterBackground:"#21232b",diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",diffViewerTitleBackground:"#2f323e",diffViewerTitleBorderColor:"#353846",diffViewerTitleColor:"#555a7b",emptyLineBackground:"#363946",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",gutterColor:"#464c67",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",removedBackground:"#632F34",removedColor:"white",removedGutterBackground:"#632b30",removedGutterColor:"#8c8c8c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f"},light:{addedBackground:"#e6ffed",addedColor:"#24292e",addedGutterBackground:"#cdffd8",addedGutterColor:"#212529",codeFoldBackground:"#f1f8ff",codeFoldContentColor:"#212529",codeFoldGutterBackground:"#dbedff",diffViewerBackground:"#fff",diffViewerColor:"212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleBorderColor:"#eee",diffViewerTitleColor:"#212529",emptyLineBackground:"#fafbfc",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",gutterColor:"#212529",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",removedBackground:"#ffeef0",removedColor:"#24292e",removedGutterBackground:"#ffdce0",removedGutterColor:"#212529",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0"}},wordAdded:{},wordDiff:{},wordRemoved:{}},fe=r(32821),he=r(33766),me=r(9728);function ve(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function je(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var xe=function(){var e=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,me.VI)(null,{},[],{uuid:"VersionControlPage"}),t=(0,s.Z)(r,1)[0],o=(0,a.useState)(null),i=o[0],l=o[1],f=(0,a.useState)(null),h=f[0],v=f[1],j=(0,a.useState)(H[0]),p=j[0],w=j[1],y=(0,ce.iV)();(0,a.useEffect)((function(){null!==y&&void 0!==y&&y.tab&&w(H.find((function(e){return e.uuid===(null===y||void 0===y?void 0:y.tab)})))}),[y]);var P=C.ZP.git_branches.list(),_=P.data,I=P.mutate,S=(0,a.useMemo)((function(){return null===_||void 0===_?void 0:_.git_branches}),[_]),O=C.ZP.git_branches.detail("current"),N=O.data,A=O.mutate,R=(0,a.useMemo)((function(){return(null===N||void 0===N?void 0:N.git_branch)||{}}),[N]),V=(0,a.useMemo)((function(){return(null===R||void 0===R?void 0:R.files)||[]}),[R]),L=C.ZP.git_branches.detail("with_remotes",{_format:"with_remotes"}),z=L.data,W=L.mutate,q=(0,a.useMemo)((function(){return null===z||void 0===z?void 0:z.git_branch}),[z]),Y=(0,a.useMemo)((function(){return(null===q||void 0===q?void 0:q.remotes)||[]}),[q]),J=C.ZP.git_files.detail(h?encodeURIComponent(h):null,{base_branch:i}),$=J.data,ee=J.mutate,ne=(0,a.useMemo)((function(){return null===$||void 0===$?void 0:$.git_file}),[$]);(0,a.useEffect)((function(){i&&ee()}),[i,ee]),(0,a.useEffect)((function(){null!==$&&void 0!==$&&$.error&&t({errors:null===$||void 0===$?void 0:$.error,response:$})}),[$,t]);var te=(0,a.useMemo)((function(){var e,n,r;return{modifiedFiles:null===R||void 0===R||null===(e=R.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return je(je({},e),{},(0,c.Z)({},n,!0))}),{}),stagedFiles:null===R||void 0===R||null===(n=R.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return je(je({},e),{},(0,c.Z)({},n,!0))}),{}),untrackedFiles:null===R||void 0===R||null===(r=R.untracked_files)||void 0===r?void 0:r.reduce((function(e,n){return je(je({},e),{},(0,c.Z)({},n,!0))}),{})}}),[R]),oe=te.modifiedFiles,ie=void 0===oe?{}:oe,de=te.stagedFiles,ve=void 0===de?{}:de,xe=te.untrackedFiles,be=void 0===xe?{}:xe;(0,a.useEffect)((function(){h&&(0,re.Qr)(ie)&&(0,re.Qr)(ve)&&(0,re.Qr)(be)&&v(null)}),[ie,h,ve,be]);var ge=(0,a.useMemo)((function(){return(null===V||void 0===V?void 0:V.length)>=1?(0,U.jsx)(X.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFileTree:A,files:V,isFileDisabled:function(){return!1},onClickFile:function(e){v((function(r){if(!r||r!==e){var t;if(!i)null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus();return e}return null}))},ref:e,renderAfterContent:function(e){var n,r,t=e.children,o=(null===t||void 0===t?void 0:t.length)>=1,i=(0,fe.a9)(e);o&&(i="".concat(i,"/"));var l={};return null!==ie&&void 0!==ie&&ie[i]?(n="M",r="Modified",l.warning=!0):null!==be&&void 0!==be&&be[i]?(n="U",r="Untracked",l.danger=!0):null!==ve&&void 0!==ve&&ve[i]&&(n="S",r="Staged",l.success=!0),o&&!n?null:(0,U.jsx)(b.Z,{mx:1,children:(0,U.jsx)(k.Z,{appearBefore:!0,label:r,widthFitContent:!0,children:(0,U.jsx)(Z.ZP,je(je({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,U.jsx)(b.Z,{p:E.cd,children:(0,U.jsx)(Z.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[i,A,e,V,ie,n,v,ve,be]),Ze=(0,a.useMemo)((function(){return!$||!ne||h&&(null===ne||void 0===ne?void 0:ne.filename)!==h}),[$,ne,h]),pe=(0,a.useMemo)((function(){if(!h)return null;var e=ne||{},n=e.content,r=e.content_from_base;return(0,U.jsxs)(ue,{children:[!i&&(0,U.jsx)(b.Z,{p:E.cd,children:(0,U.jsx)(Z.ZP,{muted:!0,children:"Please select a base branch to see the file diffs."})}),(null===ne||void 0===ne?void 0:ne.error)&&(0,U.jsx)(b.Z,{p:E.cd,children:(0,U.jsx)(Z.ZP,{danger:!0,monospace:!0,preWrap:!0,children:null===ne||void 0===ne?void 0:ne.error})}),i&&!(null!==ne&&void 0!==ne&&ne.error)&&(0,U.jsxs)(U.Fragment,{children:[Ze&&(0,U.jsx)(b.Z,{p:E.cd,children:(0,U.jsx)(g.Z,{inverted:!0})}),!Ze&&(0,U.jsx)(u(),{compareMethod:d.DiffMethod.WORDS,newValue:n||"",oldValue:r||"",renderContent:function(e){return(0,U.jsx)(Z.ZP,{monospace:!0,children:e})},splitView:!0,styles:ae,useDarkTheme:!0})]})]})}),[i,ne,Ze,h]),we=(0,a.useMemo)((function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{style:{marginBottom:.5*E.iI,marginTop:.5*E.iI},children:(0,U.jsx)(G.Z,{compact:!0,onClickTab:function(e){var n=e.uuid;(0,he.u7)({tab:n})},selectedTabUUID:null===p||void 0===p?void 0:p.uuid,tabs:H})}),(0,U.jsx)(m.Z,{light:!0})]})}),[p]),ke=(0,a.useMemo)((function(){return(0,U.jsx)(se,{branch:R,fetchBranch:W,loading:!z,remotes:Y,showError:t})}),[R,z,W,Y,t]),Ce=(0,a.useMemo)((function(){return(0,U.jsx)(T,{branch:R,branches:S,fetchBranch:A,fetchBranches:I,showError:t})}),[R,S,A,I,t]),ye=(0,a.useMemo)((function(){return(0,U.jsx)(le,{branch:R,fetchBranch:A,modifiedFiles:ie,showError:t,stagedFiles:ve,untrackedFiles:be})}),[R,A,ie,t,ve,be]),Pe=(0,a.useMemo)((function(){return(0,U.jsx)(Q,{branch:R,branches:S,fetchBranch:A,modifiedFiles:ie,remotes:Y,setSelectedFilePath:v,showError:t,stagedFiles:ve})}),[R,S,A,ie,Y,v,t,ve]);return(0,U.jsx)(K.Z,{after:pe,afterHidden:!h,before:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{p:1,children:(0,U.jsx)(x.Z,{compact:!0,label:"Base branch",onChange:function(e){return l(e.target.value)},ref:n,small:!0,value:i||"",children:null===S||void 0===S?void 0:S.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})}),ge]}),mainContainerHeader:we,title:"Version control",uuid:"Version control/index",children:(0,U.jsxs)(b.Z,{p:E.cd,children:[!N&&(0,U.jsx)(g.Z,{inverted:!0}),N&&(0,U.jsxs)(U.Fragment,{children:[F.uuid===(null===p||void 0===p?void 0:p.uuid)&&ke,B.uuid===(null===p||void 0===p?void 0:p.uuid)&&Ce,M.uuid===(null===p||void 0===p?void 0:p.uuid)&&ye,D.uuid===(null===p||void 0===p?void 0:p.uuid)&&Pe]})]})})};function be(){return(0,U.jsx)(xe,{})}be.getInitialProps=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var ge=(0,l.Z)(be)},75302:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return r(83243)}])}},function(e){e.O(0,[844,7607,7011,4407,1424,1005,7815,6694,551,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);